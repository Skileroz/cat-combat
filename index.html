<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cat Combat - –ò–≥—Ä–∞</title>
<style>
body { margin:0; padding:0; font-family:Arial, sans-serif; background:#FFE5B4; overflow:hidden; }
h1,h2,h3 { color:#8B4000; text-align:center; }
#container { display:flex; justify-content:center; align-items:flex-start; gap:40px; margin-top:20px; position:relative; z-index:1; }
.column { display:flex; flex-direction: column; gap:10px; min-width:200px; }
#centerColumn { display:flex; flex-direction: column; align-items:center; gap:10px; min-width:250px; }
button { background-color:#FF8C00; border:2px solid #FF8C00; border-radius:10px; padding:12px 25px; font-size:18px; color:white; cursor:pointer; text-align:center; font-weight:bold; box-shadow:0 4px #CC7000; transition: transform 0.2s, background 0.2s; }
button:hover { transform: scale(1.05); background-color:#FFA500; }
button:active { box-shadow:0 2px #CC7000; transform: translateY(2px); }
button:disabled { background-color:#FFB266; border:2px solid #FFB266; cursor:not-allowed; }
#message { background: rgba(255,140,0,0.2); color:#8B4000; padding:10px; border-radius:10px; display:none; max-width:300px; text-align:center; font-weight:bold; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
#catOverlay { position:absolute; top:0; left:0; width:100%; height:100%; background:white; display:flex; justify-content:center; align-items:center; flex-direction:column; z-index:10; transition: opacity 1s ease; }
#catEmoji { font-size:80px; margin-bottom:20px; }
#backgroundText { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:100px; color:rgba(255,140,0,0.2); pointer-events:none; z-index:0; }
input.feedbackInput { padding:8px; width:180px; border-radius:8px; border:2px solid #FF8C00; }
</style>
</head>
<body>

<!-- –û–≤–µ—Ä–ª–µ–π -->
<div id="catOverlay">
  <div id="catEmoji">üê±</div>
  <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!</h1>
</div>

<div id="backgroundText">Cat Combat</div>

<div id="container">

  <!-- –õ–µ–≤—ã–π —Å—Ç–æ–ª–±–∏–∫: –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø—Ä–µ–¥–ª–æ–∂–∫–∞ -->
  <div class="column" id="leftColumn">
    <div id="profileSection">
      <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞</h3>
      <p>–ö–æ–¥: <span id="profileCode">‚Äî</span></p>
      <p>–ú–æ–Ω–µ—Ç—ã: <span id="profileCoins">0</span></p>
      <p>–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥/—Å–µ–∫: <span id="profilePPS">0</span></p>
    </div>
    <h3>üí° –ü—Ä–µ–¥–ª–æ–∂–∫–∞</h3>
    <input type="text" id="feedbackInput" class="feedbackInput" placeholder="–ù–∞–ø–∏—à–∏ –∏–¥–µ—é">
    <button onclick="sendFeedback()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>

  <!-- –¶–µ–Ω—Ç—Ä: –∫–ª–∏–∫–µ—Ä -->
  <div id="centerColumn">
    <p>–ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span></p>
    <p>–≠–Ω–µ—Ä–≥–∏—è: <span id="energy">20</span>/20</p>
    <button onclick="clickCat()">–ö–õ–ò–ö üêæ</button>
    <div id="message"></div>
    <div id="passive">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É: <span id="pps">0</span></div>
  </div>

  <!-- –ü—Ä–∞–≤—ã–π —Å—Ç–æ–ª–±–∏–∫ 1: —É–ª—É—á—à–µ–Ω–∏—è -->
  <div class="column" id="upgradesSection">
    <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
    <button id="btnClaws" onclick="buyUpgrade('claws')">üó° –ö–æ–≥—Ç–∏ (+1 –∫–ª–∏–∫) ‚Äî <span id="costClaws">10</span>üí∞</button>
    <button id="btnToy" onclick="buyUpgrade('toy')">üéæ –ò–≥—Ä—É—à–∫–∞ (+2 –∫–ª–∏–∫) ‚Äî <span id="costToy">50</span>üí∞</button>
    <button id="btnMischief" onclick="buyUpgrade('mischief')">üòà –ü–∞–∫–æ—Å—Ç—å (+5 –∫–ª–∏–∫) ‚Äî <span id="costMischief">200</span>üí∞</button>
  </div>

  <!-- –ü—Ä–∞–≤—ã–π —Å—Ç–æ–ª–±–∏–∫ 2: –ø–∏—Ç–æ–º—Ü—ã -->
  <div class="column" id="petsSection">
    <h2>–ü–∏—Ç–æ–º—Ü—ã</h2>
    <button id="btnGuardDog" onclick="buyUpgrade('guardDog')">üê∂ –°—Ç–æ—Ä–æ–∂ –ë–æ–±–∏–∫ (+1/—Å–µ–∫) ‚Äî <span id="costGuardDog">100</span>üí∞</button>
    <button id="btnCatPet" onclick="buyUpgrade('catPet')">üê± –ú—É—Ä–∫–∞ (+2/—Å–µ–∫) ‚Äî <span id="costCatPet">250</span>üí∞</button>
    <button id="btnHuskyPet" onclick="buyUpgrade('huskyPet')">üêï –•–∞—Å–∫–∏ (+3/—Å–µ–∫) ‚Äî <span id="costHuskyPet">500</span>üí∞</button>
  </div>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ======== Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ========
const firebaseConfig = {
  apiKey: "–í–ê–®_API_KEY",
  authDomain: "–í–ê–®_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://–í–ê–®_PROJECT_ID.firebaseio.com",
  projectId: "–í–ê–®_PROJECT_ID",
  storageBucket: "–í–ê–®_PROJECT_ID.appspot.com",
  messagingSenderId: "–í–ê–®_SENDER_ID",
  appId: "–í–ê–®_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ======== –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å ========
const userCode = "1234J";

// ======== –î–∞–Ω–Ω—ã–µ ========
let coins = 0;
let upgrades = {claws:0,toy:0,mischief:0,guardDog:0,catPet:0,huskyPet:0};
let passiveIncome=0;

// ======== –°—Ç–æ–∏–º–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∏–π ========
const upgradeBaseCost = {claws:10, toy:50, mischief:200, guardDog:100, catPet:250, huskyPet:500};

// ======== HTML —ç–ª–µ–º–µ–Ω—Ç—ã ========
const coinDisplay = document.getElementById("coins");
const profileCoins = document.getElementById("profileCoins");
const profilePPS = document.getElementById("profilePPS");
const profileCode = document.getElementById("profileCode");
const message = document.getElementById("message");

// ======== –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö ========
function loadData(){
  db.ref('players/'+userCode).once('value').then(snapshot=>{
    if(snapshot.exists()){
      const data = snapshot.val();
      coins = data.coins || 0;
      upgrades = data.upgrades || upgrades;
      passiveIncome = calculatePassive();
      updateDisplay();
    } else {
      db.ref('players/'+userCode).set({coins:0, upgrades:upgrades});
      passiveIncome = calculatePassive();
    }
    updateButtonCosts();
  });
}

// ======== –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ ========
function updateDisplay(){
  coinDisplay.innerText = coins;
  profileCoins.innerText = coins;
  profilePPS.innerText = passiveIncome;
  profileCode.innerText = userCode;
}

// ======== –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ ========
function calculatePassive(){
  return (upgrades.guardDog||0)*1 + (upgrades.catPet||0)*2 + (upgrades.huskyPet||0)*3;
}

// ======== –ö–ª–∏–∫–µ—Ä ========
function clickCat(){
  let power = 1 + (upgrades.claws||0) + (upgrades.toy||0) + (upgrades.mischief||0);
  coins += power;
  updateDisplay();
  saveData();
}

// ======== –ê–ø–≥—Ä–µ–π–¥—ã ========
function buyUpgrade(upg){
  let cost = upgradeBaseCost[upg] * ((upgrades[upg]||0)+1);
  if(coins < cost){ showMessage("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!"); return; }
  coins -= cost;
  upgrades[upg] = (upgrades[upg]||0) + 1;
  passiveIncome = calculatePassive();
  saveData();
  showMessage(upg + " –∫—É–ø–ª–µ–Ω–æ!");
  updateDisplay();
  updateButtonCosts();
}

// ======== –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö ========
function updateButtonCosts(){
  document.getElementById("costClaws").innerText = upgradeBaseCost.claws*((upgrades.claws||0)+1);
  document.getElementById("costToy").innerText = upgradeBaseCost.toy*((upgrades.toy||0)+1);
  document.getElementById("costMischief").innerText = upgradeBaseCost.mischief*((upgrades.mischief||0)+1);
  document.getElementById("costGuardDog").innerText = upgradeBaseCost.guardDog*((upgrades.guardDog||0)+1);
  document.getElementById("costCatPet").innerText = upgradeBaseCost.catPet*((upgrades.catPet||0)+1);
  document.getElementById("costHuskyPet").innerText = upgradeBaseCost.huskyPet*((upgrades.huskyPet||0)+1);
}

// ======== –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ========
function saveData(){
  db.ref('players/'+userCode).set({coins:coins, upgrades:upgrades});
}

// ======== –°–æ–æ–±—â–µ–Ω–∏—è ========
function showMessage(msg){
  message.style.display="block"; message.innerText=msg;
  setTimeout(()=>{ message.style.display="none"; },2000);
}

// ======== –ü—Ä–µ–¥–ª–æ–∂–∫–∞ ========
function sendFeedback(){ 
  let val = document.getElementById("feedbackInput").value; 
  if(val) showMessage("–ò–¥–µ—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–≥—Ä–æ–∫—É 1234J!");
}

// ======== –û–≤–µ—Ä–ª–µ–π —Å –∫–æ—Ç–æ–º ========
const catOverlay = document.getElementById("catOverlay");
setTimeout(()=>{ catOverlay.style.opacity=0; setTimeout(()=>catOverlay.style.display="none",1000); },3000);

loadData();
</script>

</body>
</html>
