<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cat Combat - –ò–≥—Ä–∞</title>
<style>
body { margin:0; padding:0; font-family:Arial, sans-serif; background:#FFE5B4; overflow:hidden; }
h1,h2,h3 { color:#8B4000; text-align:center; }
#container { display:flex; justify-content:center; align-items:flex-start; gap:40px; margin-top:20px; position:relative; z-index:1; }
.column { display:flex; flex-direction: column; gap:10px; min-width:200px; }
#centerColumn { display:flex; flex-direction: column; align-items:center; gap:10px; min-width:250px; }
button { background-color:#FF8C00; border:2px solid #FF8C00; border-radius:10px; padding:12px 25px; font-size:18px; color:white; cursor:pointer; text-align:center; font-weight:bold; box-shadow:0 4px #CC7000; transition: transform 0.2s, background 0.2s; }
button:hover { transform: scale(1.05); background-color:#FFA500; }
button:active { box-shadow:0 2px #CC7000; transform: translateY(2px); }
button:disabled { background-color:#FFB266; border:2px solid #FFB266; cursor:not-allowed; }
#message { background: rgba(255,140,0,0.2); color:#8B4000; padding:10px; border-radius:10px; display:none; max-width:300px; text-align:center; font-weight:bold; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
#miniGame { display:none; position:relative; width:300px; height:300px; border:2px dashed #FF8C00; margin-top:10px; border-radius:15px; background: rgba(255,140,0,0.1); }
.flyingAnimal { position:absolute; width:50px; height:50px; opacity:0.2; pointer-events:none; transition: transform 0.1s linear; font-size:36px; z-index:0; }
input.feedbackInput { padding:8px; width:180px; border-radius:8px; border:2px solid #FF8C00; }
#catOverlay { position:absolute; top:0; left:0; width:100%; height:100%; background:white; display:flex; justify-content:center; align-items:center; flex-direction:column; z-index:10; transition: opacity 1s ease; }
#catEmoji { font-size:80px; margin-bottom:20px; }
#backgroundText { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:100px; color:rgba(255,140,0,0.2); pointer-events:none; z-index:0; }
</style>
</head>
<body>

<!-- –û–≤–µ—Ä–ª–µ–π —Å –∫–æ—Ç–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å" -->
<div id="catOverlay">
    <div id="catEmoji">üê±</div>
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!</h1>
</div>

<div id="backgroundText">Cat Combat</div>

<div id="container">

  <!-- –¶–µ–Ω—Ç—Ä: –∫–ª–∏–∫–µ—Ä -->
  <div id="centerColumn">
    <p>–ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span></p>
    <p>–≠–Ω–µ—Ä–≥–∏—è: <span id="energy">20</span>/20</p>
    <button onclick="clickCat()">–ö–õ–ò–ö üêæ</button>
    <div id="message"></div>
    <div id="passive">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É: <span id="pps">0</span></div>
    <div id="miniGameDifficulty">
      <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –º—ã—à–∫–∏:</p>
      <button onclick="startMiniGame('easy')">1Ô∏è‚É£ –õ—ë–≥–∫–∞—è</button>
      <button onclick="startMiniGame('medium')">2Ô∏è‚É£ –°—Ä–µ–¥–Ω—è—è</button>
      <button onclick="startMiniGame('hard')">3Ô∏è‚É£ –°–ª–æ–∂–Ω–∞—è</button>
      <button onclick="startMiniGame('rofl')">4Ô∏è‚É£ –†–æ—Ñ–ª-–º–∞—Å—Ç–µ—Ä</button>
    </div>
    <button onclick="showMiniGameDifficulty()">üéÆ –ú–∏–Ω–∏-–∏–≥—Ä–∞</button>
    <div id="miniGame"></div>
  </div>

  <!-- –ü—Ä–∞–≤—ã–π —Å—Ç–æ–ª–±–∏–∫ 1: —É–ª—É—á—à–µ–Ω–∏—è -->
  <div class="column" id="upgradesSection">
    <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
    <button id="btnClaws" onclick="buyUpgrade('claws')">üó° –ö–æ–≥—Ç–∏ (+1 –∫–ª–∏–∫)</button>
    <button id="btnToy" onclick="buyUpgrade('toy')">üéæ –ò–≥—Ä—É—à–∫–∞ (+2 –∫–ª–∏–∫)</button>
    <button id="btnMischief" onclick="buyUpgrade('mischief')">üòà –ü–∞–∫–æ—Å—Ç—å (+5 –∫–ª–∏–∫)</button>
  </div>

  <!-- –ü—Ä–∞–≤—ã–π —Å—Ç–æ–ª–±–∏–∫ 2: –ø–∏—Ç–æ–º—Ü—ã -->
  <div class="column" id="petsSection">
    <h2>–ü–∏—Ç–æ–º—Ü—ã</h2>
    <button id="btnGuardDog" onclick="buyUpgrade('guardDog')">üê∂ –°—Ç–æ—Ä–æ–∂ –ë–æ–±–∏–∫ (+1/—Å–µ–∫)</button>
    <button id="btnCatPet" onclick="buyUpgrade('catPet')">üê± –ú—É—Ä–∫–∞ (+2/—Å–µ–∫)</button>
    <button id="btnHuskyPet" onclick="buyUpgrade('huskyPet')">üêï –•–∞—Å–∫–∏ (+3/—Å–µ–∫)</button>
  </div>

</div>

<script>
// ======== –ö–æ–¥ –∞–∫–∫–∞—É–Ω—Ç–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω 1234J ========
const userCode = "1234J";
localStorage.setItem("userCode", userCode);

// ======== –û–≤–µ—Ä–ª–µ–π —Å –∫–æ—Ç–æ–º ========
const catOverlay = document.getElementById("catOverlay");
setTimeout(()=>{
    catOverlay.style.opacity = 0;
    setTimeout(()=>{ catOverlay.style.display = "none"; },1000);
}, 3000);

// ======== –î–∞–Ω–Ω—ã–µ —Å localStorage ========
let coins = Number(localStorage.getItem("coins") || 0);
let upgrades = JSON.parse(localStorage.getItem("upgrades") || '{"claws":0,"toy":0,"mischief":0,"guardDog":0,"catPet":0,"huskyPet":0}');
let clickMultiplier=1, passiveBonus=0, nextClickBonus=0, maxEnergy=20, energy=maxEnergy, clickTimes=[], comboActive=false;

// ======== HTML —ç–ª–µ–º–µ–Ω—Ç—ã ========
const coinDisplay = document.getElementById("coins");
const energyDisplay = document.getElementById("energy");
const ppsDisplay = document.getElementById("pps");
const message = document.getElementById("message");

// ======== –ê–ø–≥—Ä–µ–π–¥—ã ========
const upgradeBaseCost={claws:10,toy:50,mischief:200,guardDog:100,catPet:250,huskyPet:500};
const upgradePower={claws:1,toy:2,mischief:5,guardDog:1,catPet:2,huskyPet:3};
const upgradeMax={claws:5,toy:5,mischief:5,guardDog:5,catPet:5,huskyPet:5};

// ======== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ========
function initGame(){
    coinDisplay.innerText = coins;
    energyDisplay.innerText = energy;
    updatePPS();
    updateProfile();
    ['claws','toy','mischief','guardDog','catPet','huskyPet'].forEach(disableButton);
}
initGame();

// ======== –ü—Ä–æ—Ñ–∏–ª—å ========
function updateProfile() {
    document.getElementById("profileCode").innerText = userCode;
    document.getElementById("profileCoins").innerText = coins;
    const pps = upgrades.guardDog*upgradePower.guardDog + upgrades.catPet*upgradePower.catPet + upgrades.huskyPet*upgradePower.huskyPet + passiveBonus;
    document.getElementById("profilePPS").innerText = pps;
}
function updateCoinsAndPPS() {
    coinDisplay.innerText = coins;
    updateProfile();
    localStorage.setItem("coins", coins);
    localStorage.setItem("upgrades", JSON.stringify(upgrades));
}

// ======== –ö–ª–∏–∫–µ—Ä ========
function clickCat(){
    if(energy<=0){ showMessage("‚ö° –ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏!"); return; }
    let now=Date.now();
    clickTimes.push(now);
    clickTimes=clickTimes.filter(t=>now-t<=2000);
    if(clickTimes.length>=3 && !comboActive){ comboActive=true; clickMultiplier*=2; showMessage("üî• –ö–æ–º–±–æ!"); setTimeout(()=>{clickMultiplier/=2; comboActive=false;},5000); clickTimes=[]; }
    let totalPower=(1+upgrades.claws*upgradePower.claws+upgrades.toy*upgradePower.toy+upgrades.mischief*upgradePower.mischief)*clickMultiplier+nextClickBonus;
    coins+=totalPower; nextClickBonus=0; energy--; updateCoinsAndPPS(); energyDisplay.innerText=energy; saveData();
}

// ======== –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ========
function saveData(){
    localStorage.setItem("coins", coins);
    localStorage.setItem("upgrades", JSON.stringify(upgrades));
}

// ======== –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è ========
function showMessage(msg){
    message.style.display="block"; message.innerText=msg;
    setTimeout(()=>{ message.style.display="none"; },2000);
}

// ======== –ó–∞–≥–ª—É—à–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π ========
function buyUpgrade(upg){ 
    if(upgrades[upg]>=upgradeMax[upg]){ showMessage("–ö—É–ø–ª–µ–Ω–æ!"); return; }
    let cost = upgradeBaseCost[upg]*(upgrades[upg]+1);
    if(coins>=cost){ coins-=cost; upgrades[upg]++; updateCoinsAndPPS(); showMessage(upg+" –∫—É–ø–ª–µ–Ω–æ!"); saveData();}
    else showMessage("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
}
function disableButton(upg){ 
    if(upgrades[upg]>=upgradeMax[upg]) document.getElementById("btn"+upg.charAt(0).toUpperCase()+upg.slice(1)).disabled=true; 
}
function sendFeedback(){ 
    let val = document.getElementById("feedbackInput").value; 
    if(val) showMessage("–ò–¥–µ—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–≥—Ä–æ–∫—É 1234J!");
}
function startMiniGame(diff){ showMessage("–ú–∏–Ω–∏-–∏–≥—Ä–∞: "+diff);}
function showMiniGameDifficulty(){ document.getElementById("miniGameDifficulty").style.display="block"; }

</script>

</body>
</html>
