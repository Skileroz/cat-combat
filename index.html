<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cat Combat - –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
<style>
body { font-family: 'Arial', sans-serif; margin:0; padding:0; background: #FFE5B4; overflow:hidden; }
h1,h2,h3 { color:#8B4000; text-align:center; }
#container { display:flex; justify-content:center; align-items:flex-start; gap:40px; margin-top:20px; position:relative; z-index:1; }
.column { display:flex; flex-direction: column; gap:10px; min-width:200px; }
#centerColumn { display:flex; flex-direction: column; align-items:center; gap:10px; min-width:250px; }
button { background-color:#FF8C00; border:2px solid #FF8C00; border-radius:10px; padding:12px 25px; font-size:18px; color:white; cursor:pointer; text-align:center; font-weight:bold; box-shadow:0 4px #CC7000; transition: transform 0.2s, background 0.2s; }
button:hover { transform: scale(1.05); background-color:#FFA500; }
button:active { box-shadow:0 2px #CC7000; transform: translateY(2px); }
button:disabled { background-color:#FFB266; border:2px solid #FFB266; cursor:not-allowed; }
#message { background: rgba(255,140,0,0.2); color:#8B4000; padding:10px; border-radius:10px; display:none; max-width:300px; text-align:center; font-weight:bold; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
#miniGame { display:none; position:relative; width:300px; height:300px; border:2px dashed #FF8C00; margin-top:10px; border-radius:15px; background: rgba(255,140,0,0.1); }
.flyingAnimal { position:absolute; width:50px; height:50px; opacity:0.2; pointer-events:none; transition: transform 0.1s linear; font-size:36px; z-index:0; }
#registrationScreen { position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(255,200,150,0.95); display:flex; justify-content:center; align-items:center; flex-direction:column; z-index:10; padding:20px; }
#nicknameInput { padding:12px; font-size:18px; border-radius:10px; border:2px solid #FF8C00; margin-top:10px; width:200px; text-align:center; }
#registerBtn { background-color:#FF8C00; border-radius:10px; padding:12px 25px; font-size:18px; color:white; font-weight:bold; margin-top:10px; cursor:pointer; box-shadow:0 4px #CC7000; transition: transform 0.2s, background 0.2s; }
#registerBtn:hover { background-color:#FFA500; transform: scale(1.05); }
#registerBtn:active { box-shadow:0 2px #CC7000; transform: translateY(2px); }
input.feedbackInput { padding:8px; width:180px; border-radius:8px; border:2px solid #FF8C00; }
</style>
</head>
<body>

<!-- –≠–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div id="registrationScreen">
  <h2>‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï ‚ö†Ô∏è</h2>
  <p style="max-width:400px; text-align:center; font-weight:bold;">
    –ù–∞—Å—Ç–æ—è—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–∞–µ—Ç: –∫–∞–∂–¥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è <b>—Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</b>.<br>
    –°–º–µ–Ω–∞ –Ω–∏–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ <b>–Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã</b>.<br>
    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–∏—Ä–∞–π—Ç–µ –∏–º—è —Å –æ—Å–æ–±–æ–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.
  </p>
  <input type="text" id="nicknameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫">
  <button id="registerBtn" onclick="registerUser()">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
</div>

<!-- –§–æ–Ω —Å –ª–µ—Ç–∞—é—â–∏–º–∏ –∑–≤–µ—Ä—É—à–∫–∞–º–∏ -->
<div id="flyingAnimalsContainer"></div>

<h1 style="position:relative; z-index:1;">üò∫ Cat Combat - –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è</h1>

<div id="container">

  <!-- –õ–µ–≤—ã–π —Å—Ç–æ–ª–±–∏–∫: –ø—Ä–æ—Ñ–∏–ª—å + –ø—Ä–µ–¥–ª–æ–∂–∫–∞ + –∞–ø–≥—Ä–µ–π–¥—ã -->
  <div class="column" id="leftColumn">

    <div id="profileSection">
      <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞</h3>
      <p>–ù–∏–∫: <span id="profileNick">‚Äî</span></p>
      <p>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: <span id="profileDate">‚Äî</span></p>
      <p>–ú–æ–Ω–µ—Ç—ã: <span id="profileCoins">0</span></p>
      <p>–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥/—Å–µ–∫: <span id="profilePPS">0</span></p>
    </div>

    <h3>üí° –ü—Ä–µ–¥–ª–æ–∂–∫–∞</h3>
    <input type="text" id="feedbackInput" class="feedbackInput" placeholder="–ù–∞–ø–∏—à–∏ –∏–¥–µ—é">
    <button onclick="sendFeedback()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    
    <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
    <button id="btnClaws" onclick="buyUpgrade('claws')">üó° –ö–æ–≥—Ç–∏ (+1 –∫–ª–∏–∫)</button>
    <button id="btnToy" onclick="buyUpgrade('toy')">üéæ –ò–≥—Ä—É—à–∫–∞ (+2 –∫–ª–∏–∫)</button>
    <button id="btnMischief" onclick="buyUpgrade('mischief')">üòà –ü–∞–∫–æ—Å—Ç—å (+5 –∫–ª–∏–∫)</button>
  </div>

  <!-- –¶–µ–Ω—Ç—Ä: –∫–ª–∏–∫–µ—Ä + –º–∏–Ω–∏-–∏–≥—Ä–∞ -->
  <div id="centerColumn">
    <p>–ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span></p>
    <p>–≠–Ω–µ—Ä–≥–∏—è: <span id="energy">20</span>/20</p>
    <button onclick="clickCat()">–ö–õ–ò–ö üêæ</button>
    <div id="message"></div>
    <div id="passive">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É: <span id="pps">0</span></div>
    <div id="miniGameDifficulty">
      <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –º—ã—à–∫–∏:</p>
      <button onclick="startMiniGame('easy')">1Ô∏è‚É£ –õ—ë–≥–∫–∞—è</button>
      <button onclick="startMiniGame('medium')">2Ô∏è‚É£ –°—Ä–µ–¥–Ω—è—è</button>
      <button onclick="startMiniGame('hard')">3Ô∏è‚É£ –°–ª–æ–∂–Ω–∞—è</button>
      <button onclick="startMiniGame('rofl')">4Ô∏è‚É£ –†–æ—Ñ–ª-–º–∞—Å—Ç–µ—Ä</button>
    </div>
    <button onclick="showMiniGameDifficulty()">üéÆ –ú–∏–Ω–∏-–∏–≥—Ä–∞</button>
    <div id="miniGame"></div>
  </div>

  <!-- –ü—Ä–∞–≤—ã–π —Å—Ç–æ–ª–±–∏–∫: –ø–∏—Ç–æ–º—Ü—ã -->
  <div class="column" id="petsSection">
    <h2>–ü–∏—Ç–æ–º—Ü—ã</h2>
    <button id="btnGuardDog" onclick="buyUpgrade('guardDog')">üê∂ –°—Ç–æ—Ä–æ–∂ –ë–æ–±–∏–∫ (+1/—Å–µ–∫)</button>
    <button id="btnCatPet" onclick="buyUpgrade('catPet')">üê± –ú—É—Ä–∫–∞ (+2/—Å–µ–∫)</button>
    <button id="btnHuskyPet" onclick="buyUpgrade('huskyPet')">üêï –•–∞—Å–∫–∏ (+3/—Å–µ–∫)</button>
  </div>

</div>

<script>
// ======== –ü—Ä–∏–≤—è–∑–∫–∞ –∫–Ω–æ–ø–æ–∫ ========
const btnClaws = document.getElementById('btnClaws');
const btnToy = document.getElementById('btnToy');
const btnMischief = document.getElementById('btnMischief');
const btnGuardDog = document.getElementById('btnGuardDog');
const btnCatPet = document.getElementById('btnCatPet');
const btnHuskyPet = document.getElementById('btnHuskyPet');

// ======== –î–∞–Ω–Ω—ã–µ ========
let coins = Number(localStorage.getItem("coins") || 0);
let upgrades = JSON.parse(localStorage.getItem("upgrades") || '{"claws":0,"toy":0,"mischief":0,"guardDog":0,"catPet":0,"huskyPet":0}');
let clickMultiplier=1, passiveBonus=0, nextClickBonus=0, maxEnergy=20, energy=maxEnergy, clickTimes=[], comboActive=false;
const coinDisplay = document.getElementById("coins");
const energyDisplay = document.getElementById("energy");
const ppsDisplay = document.getElementById("pps");
const message = document.getElementById("message");
const upgradeBaseCost={claws:10,toy:50,mischief:200,guardDog:100,catPet:250,huskyPet:500};
const upgradePower={claws:1,toy:2,mischief:5,guardDog:1,catPet:2,huskyPet:3};
const upgradeMax={claws:5,toy:5,mischief:5,guardDog:5,catPet:5,huskyPet:5};

// ======== –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ========
if(!localStorage.getItem("registerDate")) localStorage.setItem("registerDate", new Date().toLocaleString());

// ======== –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ========
window.onload = function() {
  const existingNick = localStorage.getItem("userNickname");
  if(existingNick){
    document.getElementById("registrationScreen").style.display = "none";
    initGame();
  } else {
    document.getElementById("registrationScreen").style.display = "flex";
  }
}

// ======== –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ========
function registerUser(){
  const nickname = document.getElementById("nicknameInput").value.trim();
  if(!nickname){ alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫!"); return; }
  if(localStorage.getItem("userNickname")){ alert("–ù–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∞–∫–∫–∞—É–Ω—Ç."); return; }
  localStorage.setItem("userNickname", nickname);
  alert(`–ê–∫–∫–∞—É–Ω—Ç "${nickname}" —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!`);
  document.getElementById("registrationScreen").style.display="none";
  initGame();
}

// ======== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã ========
function initGame(){
  coinDisplay.innerText = coins;
  energyDisplay.innerText = energy;
  updatePPS();
  updateProfile();
  ['claws','toy','mischief','guardDog','catPet','huskyPet'].forEach(disableButton);
}

// ======== –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞ ========
function updateProfile() {
  const nick = localStorage.getItem("userNickname") || "–ò–≥—Ä–æ–∫";
  const date = localStorage.getItem("registerDate") || "‚Äî";
  document.getElementById("profileNick").innerText = nick;
  document.getElementById("profileDate").innerText = date;
  document.getElementById("profileCoins").innerText = coins;
  const pps = upgrades.guardDog*upgradePower.guardDog + upgrades.catPet*upgradePower.catPet + upgrades.huskyPet*upgradePower.huskyPet + passiveBonus;
  document.getElementById("profilePPS").innerText = pps;
}
function updateCoinsAndPPS() {
  coinDisplay.innerText = coins;
  updateProfile();
}

// ======== –ö–ª–∏–∫–µ—Ä ========
function clickCat(){
  if(energy<=0){ showMessage("‚ö° –ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏!"); return; }
  let now=Date.now();
  clickTimes.push(now);
  clickTimes=clickTimes.filter(t=>now-t<=2000);
  if(clickTimes.length>=3 && !comboActive){ comboActive=true; clickMultiplier*=2; showMessage("üî• –ö–æ–º–±–æ!"); setTimeout(()=>{clickMultiplier/=2; comboActive=false;},5000); clickTimes=[]; }
  let totalPower=(1+upgrades.claws*upgradePower.claws+upgrades.toy*upgradePower.toy+upgrades.mischief*upgradePower.mischief)*clickMultiplier+nextClickBonus;
  coins+=totalPower; nextClickBonus=0; energy--; updateCoinsAndPPS(); energyDisplay.innerText=energy; saveData();
}

// ======== –ê–ø–≥—Ä–µ–π–¥—ã ========
function buyUpgrade(name){
  if(upgrades[name]>=upgradeMax[name]){ showMessage("‚úÖ –ú–∞–∫—Å–∏–º—É–º"); disableButton(name); return; }
  let cost=Math.floor(upgradeBaseCost[name]*Math.pow(2,upgrades[name]));
  if(coins>=cost){ coins-=cost; upgrades[name]++; updateCoinsAndPPS(); saveData(); showMessage(getUpgradeName(name)+" –∫—É–ø–ª–µ–Ω–æ!"); if(upgrades[name]>=upgradeMax[name]) disableButton(name); updatePPS(); }
  else showMessage("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
}
function getUpgradeName(name){
  switch(name){ case 'claws': return 'üó° –ö–æ–≥—Ç–∏'; case 'toy': return 'üéæ –ò–≥—Ä—É—à–∫–∞'; case 'mischief': return 'üòà –ü–∞–∫–æ—Å—Ç—å';
  case 'guardDog': return 'üê∂ –°—Ç–æ—Ä–æ–∂ –ë–æ–±–∏–∫'; case 'catPet': return 'üê± –ú—É—Ä–∫–∞'; case 'huskyPet': return 'üêï –•–∞—Å–∫–∏'; default: return name; }
}
function disableButton(name){
  const btnMap={claws:btnClaws,toy:btnToy,mischief:btnMischief,guardDog:btnGuardDog,catPet:btnCatPet,huskyPet:btnHuskyPet};
  if(upgrades[name]>=upgradeMax[name]){ btnMap[name].disabled=true; btnMap[name].innerText=getUpgradeName(name)+" ‚Äî –ö—É–ø–ª–µ–Ω–æ"; }
}
function saveData(){ localStorage.setItem("coins",coins); localStorage.setItem("upgrades",JSON.stringify(upgrades)); }
function showMessage(text){ message.innerText=text; message.style.display="block"; setTimeout(()=>message.style.display="none",4000); }
function updatePPS(){ let pps = upgrades.guardDog*upgradePower.guardDog + upgrades.catPet*upgradePower.catPet + upgrades.huskyPet*upgradePower.huskyPet + passiveBonus; ppsDisplay.innerText=pps; updateProfile(); }

// ======== –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ ========
setInterval(()=>{ let passive = upgrades.guardDog*upgradePower.guardDog + upgrades.catPet*upgradePower.catPet + upgrades.huskyPet*upgradePower.huskyPet + passiveBonus; coins += passive; updateCoinsAndPPS(); saveData(); },1000);
setInterval(()=>{ if(energy<maxEnergy){ energy++; energyDisplay.innerText=energy; } },1000);

// ======== –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è ========
setInterval(()=>{ if(Math.random()<0.4) randomEvent(); },30000);
function randomEvent(){ const events=[{text:"üê≠ –ö–æ—Ç—ë–Ω–æ–∫ –Ω–∞—à—ë–ª –º–æ–Ω–µ—Ç—ã +50", action:()=>coins+=50},{text:"‚ö° –ö–æ–º–±–æ! √ó2 –Ω–∞ 10 —Å–µ–∫", action:()=>{ clickMultiplier=2; setTimeout(()=>clickMultiplier=1,10000); }},{text:"üéâ –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ √ó2 –Ω–∞ 15 —Å–µ–∫", action:()=>{ passiveBonus = upgrades.guardDog+upgrades.catPet+upgrades.huskyPet; setTimeout(()=>passiveBonus=0,15000); }},{text:"üíé –ö–∞–º–µ–Ω—å +200", action:()=>coins+=200},{text:"üî• –°–ª–µ–¥—É—é—â–∏–π –∫–ª–∏–∫ +50", action:()=>nextClickBonus=50}]; const e = events[Math.floor(Math.random()*events.length)]; e.action(); showMessage(e.text); updateCoinsAndPPS(); }

// ======== –ú–∏–Ω–∏-–∏–≥—Ä–∞ —Å –º—ã—à–∫–æ–π ========
function showMiniGameDifficulty(){ document.getElementById("miniGameDifficulty").style.display="flex"; }
function startMiniGame(level){
  document.getElementById("miniGameDifficulty").style.display="none"; let miniCoins=0;
  const game=document.getElementById("miniGame"); game.innerHTML=""; game.style.display="block";
  const mouse=document.createElement("div"); mouse.innerText="üê≠"; mouse.style.position="absolute";
  let speed,size;
  switch(level){ case 'easy': speed=500; size=60; break; case 'medium': speed=350; size=45; break; case 'hard': speed=200; size=30; break; case 'rofl': speed=80; size=25; break; }
  mouse.style.fontSize=size+"px"; game.appendChild(mouse);
  function jumpMouse(){ let top=Math.floor(Math.random()*(game.clientHeight-size)); let left=Math.floor(Math.random()*(game.clientWidth-size)); mouse.style.top=top+"px"; mouse.style.left=left+"px"; }
  jumpMouse();
  const interval=setInterval(jumpMouse, speed);
  mouse.onclick=()=>{ miniCoins+=10; jumpMouse(); }
  setTimeout(()=>{ clearInterval(interval); game.style.display="none"; coins+=miniCoins; updateCoinsAndPPS(); saveData(); showMessage(`üéâ –ú–∏–Ω–∏-–∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! +${miniCoins} –º–æ–Ω–µ—Ç`); },10000);
}

// ======== –õ–µ—Ç–∞—é—â–∏–µ –∑–≤–µ—Ä—É—à–∫–∏ ========
const animalImages=['üê∂','üê±','üê≠','üê∞','ü¶ä']; const flyingAnimals=[];
function createFlyingAnimal(){ const animal=document.createElement('div'); animal.classList.add('flyingAnimal'); animal.innerText=animalImages[Math.floor(Math.random()*animalImages.length)]; document.body.appendChild(animal); animal.style.top=Math.random()*window.innerHeight+'px'; animal.style.left=Math.random()*window.innerWidth+'px'; animal.dataset.angle=Math.random()*360; flyingAnimals.push(animal); }
for(let i=0;i<10;i++) createFlyingAnimal();
setInterval(()=>{ flyingAnimals.forEach(animal=>{ let top=parseFloat(animal.style.top), left=parseFloat(animal.style.left), angle=parseFloat(animal.dataset.angle); top+=Math.sin(angle*Math.PI/180)*0.5; left+=Math.cos(angle*Math.PI/180)*0.5; angle+=0.5


