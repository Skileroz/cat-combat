<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Cat Combat</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    button { font-size: 18px; padding: 10px 20px; margin: 5px; cursor: pointer; }
    #upgrades button { display: block; margin: 10px auto; }
  </style>
</head>
<body>
  <h1>üò∫ Cat Combat</h1>
  <p>–ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span></p>
  <button onclick="clickCat()">–ö–õ–ò–ö üêæ</button>

  <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
  <div id="upgrades">
    <button onclick="buyUpgrade('claws')">–ö–æ–≥—Ç–∏ (+1 –∫–ª–∏–∫) ‚Äî 10 –º–æ–Ω–µ—Ç</button>
    <button onclick="buyUpgrade('toy')">–ò–≥—Ä—É—à–∫–∞ (+2 –∫–ª–∏–∫) ‚Äî 50 –º–æ–Ω–µ—Ç</button>
    <button onclick="buyUpgrade('mischief')">–ü–∞–∫–æ—Å—Ç—å (+5 –∫–ª–∏–∫) ‚Äî 200 –º–æ–Ω–µ—Ç</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    let coins = Number(localStorage.getItem("coins") || 0);
    let upgrades = JSON.parse(localStorage.getItem("upgrades") || '{"claws":0,"toy":0,"mischief":0}');

    const upgradeCosts = { claws: 10, toy: 50, mischief: 200 };
    const upgradePower = { claws: 1, toy: 2, mischief: 5 };

    document.getElementById("coins").innerText = coins;

    function clickCat() {
      let totalPower = 1 + upgrades.claws * upgradePower.claws +
                          upgrades.toy * upgradePower.toy +
                          upgrades.mischief * upgradePower.mischief;
      coins += totalPower;
      document.getElementById("coins").innerText = coins;
      saveData();
    }

    function buyUpgrade(name) {
      let cost = upgradeCosts[name];
      if (coins >= cost) {
        coins -= cost;
        upgrades[name]++;
        alert(`–í—ã –∫—É–ø–∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ: ${name}! –¢–µ–ø–µ—Ä—å –≤–∞—à –∫–ª–∏–∫ –¥–∞—ë—Ç –±–æ–ª—å—à–µ –º–æ–Ω–µ—Ç.`);
        document.getElementById("coins").innerText = coins;
        saveData();
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
      }
    }

    function saveData() {
      localStorage.setItem("coins", coins);
      localStorage.setItem("upgrades", JSON.stringify(upgrades));
    }
  </script>
</body>
</html>
